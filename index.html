// Bytt ut de eksisterende setMode og updateUI funksjonene dine med disse:

let currentMode = 'studio'; // Global oversikt over hva som er valgt

function setMode(mode) {
    currentMode = mode;
    const configTitle = document.getElementById('config-title');
    const inputArea = document.querySelector('.input-group'); // Beholderen for input
    const pkgSelect = document.getElementById('pkgSelect');
    
    // Bla ned til konfiguratoren
    document.getElementById('konfigurator').scrollIntoView();

    // Logikk for de forskjellige valgene
    if (mode === 'figurer') {
        configTitle.innerText = "Velg dine figurer";
        // Her kan vi senere bytte ut tekstfeltet med bilde-valg for figurer
        document.getElementById('nameInput').placeholder = "F.eks: BIL, HJERTE, DYR...";
        pkgSelect.value = 'studio'; 
    } 
    else if (mode === 'abc') {
        configTitle.innerText = "Komplette Bokstavsett";
        document.getElementById('nameInput').value = "ABC"; // Forhåndsutfyll
        pkgSelect.value = 'gave';
    }
    else if (mode === 'gave') {
        configTitle.innerText = "Gaveeske med navn";
        pkgSelect.value = 'gave';
        document.getElementById('nameInput').placeholder = "Skriv navn her...";
    }
    else {
        configTitle.innerText = "Studio-rør med navn";
        pkgSelect.value = 'studio';
        document.getElementById('nameInput').placeholder = "Skriv navn her...";
    }

    updateUI();
}

function updateUI() {
    const input = document.getElementById('nameInput');
    const pkg = document.getElementById('pkgSelect').value;
    const preview = document.getElementById('preview');
    
    // Grunnleggende vask av tekst
    let name = input.value.toUpperCase().replace(/[^A-ZÆØÅ ]/g, '');
    input.value = name;
    preview.innerHTML = '';

    // Visuell eske-effekt
    if (pkg === 'gave') preview.classList.add('box-mode');
    else preview.classList.remove('box-mode');

    if (name.length === 0) {
        preview.innerHTML = '<p style="color: #ccc;">Venter på dine valg...</p>';
        document.getElementById('totalPrice').innerText = '0 kr';
        document.getElementById('buyBtn').disabled = true;
        return;
    }

    // Lag bokstavene/figurene i preview
    const items = name.split('');
    items.forEach((char, i) => {
        if(char === ' ') return; // Hopp over mellomrom
        const div = document.createElement('div');
        div.className = 'letter';
        div.innerText = char;
        
        // Hvis vi er i figur-modus, kan vi senere bytte ut 'char' med et bilde/ikon
        div.style.background = colors[i % colors.length];
        preview.appendChild(div);
    });

    // Beregn pris (Eksempel: 95 pr del, +89 for eske)
    let unitPrice = 95;
    if (currentMode === 'abc') unitPrice = 85; // Rabatt på fulle sett?
    
    const total = (name.replace(/\s/g, '').length * unitPrice) + (pkg === 'gave' ? 89 : 0);
    document.getElementById('totalPrice').innerText = total.toLocaleString() + ' kr';
    document.getElementById('buyBtn').disabled = name.length < 1;
}
